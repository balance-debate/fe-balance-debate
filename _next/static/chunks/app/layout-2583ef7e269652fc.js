(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{8737:(e,n,t)=>{"use strict";t.d(n,{As:()=>d});var r=t(59501),s=t(68452),o=t(91249),i=t(13727),a=t(93732);let l={ME:["auth","me"]},u={signup:async e=>(0,a.$P)(i.S.AUTH.SIGNUP,e),login:async e=>(0,a.$P)(i.S.AUTH.LOGIN,e),logout:async()=>(0,a.$P)(i.S.AUTH.LOGOUT),me:async()=>(0,a.Vg)(i.S.AUTH.ME)},d={useMe:()=>(0,r.I)({queryKey:l.ME,queryFn:u.me}),useSignup:()=>{let e=(0,s.jE)();return(0,o.n)({mutationFn:u.signup,onSuccess:()=>{e.invalidateQueries({queryKey:l.ME})}})},useLogin:()=>{let e=(0,s.jE)();return(0,o.n)({mutationFn:u.login,onSuccess:()=>{e.invalidateQueries({queryKey:l.ME})}})},useLogout:()=>{let e=(0,s.jE)();return(0,o.n)({mutationFn:u.logout,onSuccess:()=>{e.clear()}})}}},13727:(e,n,t)=>{"use strict";t.d(n,{J:()=>r,S:()=>s});let r="https://dev-api.balance-debate.com",s={AUTH:{SIGNUP:"/signup",LOGIN:"/login",LOGOUT:"/logout",ME:"/me"}}},29046:(e,n,t)=>{"use strict";t.d(n,{AuthModalProvider:()=>x,X:()=>w});var r=t(72311),s=t(62847),o=t(81678),i=t(46365),a=t(5950),l=t(45060),u=t(58989),d=t(420),c=t(91791),m=t(44402),h=t(73627),v=t(8737),g=t(45451);function p(e){let{open:n,onClose:t,defaultTab:p="login"}=e,[f,x]=(0,s.useState)(p),[w,A]=(0,s.useState)({nickname:"",password:""}),[b,P]=(0,s.useState)({nickname:"",password:"",confirmPassword:""}),{useLogin:y,useSignup:j}=v.As,S=y(),k=j(),{showSnackbar:E}=(0,g.d)(),C=()=>{A({nickname:"",password:""}),P({nickname:"",password:"",confirmPassword:""}),x(p),t()},T=async e=>{if(e.preventDefault(),!w.nickname.trim())return void E("닉네임을 입력해주세요.","error");if(!w.password)return void E("비밀번호를 입력해주세요.","error");try{let e=await S.mutateAsync(w);200!==e.statusCode||e.code?E(e.message||"로그인에 실패했습니다.","error"):(E("로그인 성공!","success"),C())}catch(e){E("로그인 중 오류가 발생했습니다.","error")}},O=async e=>{if(e.preventDefault(),!b.nickname.trim())return void E("닉네임을 입력해주세요.","error");if(!b.password)return void E("비밀번호를 입력해주세요.","error");if(b.password!==b.confirmPassword)return void E("비밀번호가 일치하지 않습니다.","error");try{let e=await k.mutateAsync({nickname:b.nickname,password:b.password});200!==e.statusCode||e.code?E(e.message||"회원가입에 실패했습니다.","error"):(E("회원가입 성공!","success"),C())}catch(e){E("회원가입 중 오류가 발생했습니다.","error")}};return(0,r.jsx)(o.A,{open:n,onClose:C,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,minHeight:400}},children:(0,r.jsxs)(i.A,{sx:{position:"relative",p:3},children:[(0,r.jsx)(a.A,{onClick:C,sx:{position:"absolute",right:8,top:8,zIndex:1},children:(0,r.jsx)(h.A,{})}),(0,r.jsx)(i.A,{sx:{borderBottom:1,borderColor:"divider",mb:3,pr:5},children:(0,r.jsxs)(l.A,{value:f,onChange:(e,n)=>{x(n),A({nickname:"",password:""}),P({nickname:"",password:"",confirmPassword:""})},variant:"fullWidth",children:[(0,r.jsx)(u.A,{label:"로그인",value:"login"}),(0,r.jsx)(u.A,{label:"회원가입",value:"signup"})]})}),"login"===f&&(0,r.jsxs)(i.A,{component:"form",onSubmit:T,sx:{mt:2},children:[(0,r.jsx)(d.A,{variant:"h5",sx:{mb:3,textAlign:"center",fontWeight:600},children:"로그인"}),(0,r.jsx)(c.A,{fullWidth:!0,label:"닉네임",value:w.nickname,onChange:e=>A(n=>({...n,nickname:e.target.value})),margin:"normal",variant:"outlined"}),(0,r.jsx)(c.A,{fullWidth:!0,label:"비밀번호",type:"password",value:w.password,onChange:e=>A(n=>({...n,password:e.target.value})),margin:"normal",variant:"outlined"}),(0,r.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:S.isPending,children:S.isPending?"로그인 중...":"로그인"})]}),"signup"===f&&(0,r.jsxs)(i.A,{component:"form",onSubmit:O,sx:{mt:2},children:[(0,r.jsx)(d.A,{variant:"h5",sx:{mb:3,textAlign:"center",fontWeight:600},children:"회원가입"}),(0,r.jsx)(c.A,{fullWidth:!0,label:"닉네임",value:b.nickname,onChange:e=>P(n=>({...n,nickname:e.target.value})),margin:"normal",variant:"outlined"}),(0,r.jsx)(c.A,{fullWidth:!0,label:"비밀번호",type:"password",value:b.password,onChange:e=>P(n=>({...n,password:e.target.value})),margin:"normal",variant:"outlined"}),(0,r.jsx)(c.A,{fullWidth:!0,label:"비밀번호 확인",type:"password",value:b.confirmPassword,onChange:e=>P(n=>({...n,confirmPassword:e.target.value})),margin:"normal",variant:"outlined",error:""!==b.confirmPassword&&b.password!==b.confirmPassword,helperText:""!==b.confirmPassword&&b.password!==b.confirmPassword?"비밀번호가 일치하지 않습니다.":""}),(0,r.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:k.isPending,children:k.isPending?"회원가입 중...":"회원가입"})]})]})})}let f=(0,s.createContext)(null);function x(e){let{children:n}=e,[t,o]=(0,s.useState)(!1),[i,a]=(0,s.useState)("login"),l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";a(e),o(!0)},u=()=>{o(!1)};return(0,r.jsxs)(f.Provider,{value:{openModal:l,closeModal:u,openLoginModal:()=>l("login"),openSignupModal:()=>l("signup")},children:[n,(0,r.jsx)(p,{open:t,onClose:u,defaultTab:i})]})}function w(){let e=(0,s.useContext)(f);if(!e)throw Error("useAuthModal must be used within an AuthModalProvider");return e}},38732:(e,n,t)=>{Promise.resolve().then(t.t.bind(t,52314,23)),Promise.resolve().then(t.bind(t,29046)),Promise.resolve().then(t.bind(t,46259)),Promise.resolve().then(t.bind(t,46248)),Promise.resolve().then(t.bind(t,45451)),Promise.resolve().then(t.t.bind(t,41578,23)),Promise.resolve().then(t.t.bind(t,43718,23))},45451:(e,n,t)=>{"use strict";t.d(n,{SnackbarProvider:()=>l,d:()=>u});var r=t(72311),s=t(76787),o=t(62773),i=t(62847);let a=(0,i.createContext)(null);function l(e){let{children:n}=e,[t,l]=(0,i.useState)(!1),[u,d]=(0,i.useState)(""),[c,m]=(0,i.useState)("info"),h=()=>{l(!1)};return(0,r.jsxs)(a.Provider,{value:{showSnackbar:function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";d(e),m(n),l(!0)}},children:[n,(0,r.jsx)(s.A,{open:t,autoHideDuration:3e3,onClose:h,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,r.jsx)(o.A,{onClose:h,severity:c,variant:"filled",sx:{width:"100%"},children:u})})]})}function u(){let e=(0,i.useContext)(a);if(!e)throw Error("useSnackbar must be used within a SnackbarProvider");return e}},46248:(e,n,t)=>{"use strict";t.d(n,{QueryProvider:()=>a});var r=t(72311),s=t(46628),o=t(68452),i=t(62847);function a(e){let{children:n}=e,[t]=(0,i.useState)(()=>new s.E({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:!1,staleTime:3e5},mutations:{retry:!1}}}));return(0,r.jsx)(o.Ht,{client:t,children:n})}},46259:(e,n,t)=>{"use strict";t.d(n,{MuiProvider:()=>l});var r=t(72311),s=t(89043),o=t(37853),i=t(13706);let a=(0,s.A)({palette:{mode:"light"},typography:{fontFamily:"var(--font-geist-sans), Arial, sans-serif"},components:{MuiCssBaseline:{styleOverrides:{body:{fontFamily:"var(--font-geist-sans), Arial, sans-serif"}}}}});function l(e){let{children:n}=e;return(0,r.jsxs)(o.A,{theme:a,children:[(0,r.jsx)(i.Ay,{}),n]})}},52314:()=>{},93732:(e,n,t)=>{"use strict";t.d(n,{$P:()=>i,Al:()=>a,Vg:()=>o});var r=t(13727);async function s(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:t="GET",headers:s={},body:o,credentials:i="include"}=n,a="".concat(r.J).concat(e),l={method:t,headers:{"Content-Type":"application/json",...s},credentials:i};o&&"GET"!==t&&(l.body=JSON.stringify(o));try{console.log("[API Request] ".concat(t," ").concat(a),o||"");let e=await fetch(a,l);console.log(e);let n=await e.json();return console.log("[API Response] ".concat(t," ").concat(a),n),n}catch(e){return console.error("[API Error] ".concat(t," ").concat(a),e),{statusCode:500,message:"Network error occurred",data:null,code:"NETWORK_ERROR"}}}function o(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(e,{...n,method:"GET"})}function i(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return s(e,{...t,method:"POST",body:n})}function a(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s(e,{...n,method:"DELETE"})}}},e=>{var n=n=>e(e.s=n);e.O(0,[791,661,881,789,20,358],()=>n(38732)),_N_E=e.O()}]);