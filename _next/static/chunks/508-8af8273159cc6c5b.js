"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[508],{8737:(t,e,r)=>{r.d(e,{As:()=>d});var n=r(59501),o=r(68452),a=r(91249),s=r(13727),i=r(93732);let l={ME:["auth","me"]},c={signup:async t=>(0,i.$P)(s.S.AUTH.SIGNUP,t),login:async t=>(0,i.$P)(s.S.AUTH.LOGIN,t),logout:async()=>(0,i.$P)(s.S.AUTH.LOGOUT),me:async()=>(0,i.Vg)(s.S.AUTH.ME)},d={useMe:()=>(0,n.I)({queryKey:l.ME,queryFn:c.me}),useSignup:()=>{let t=(0,o.jE)();return(0,a.n)({mutationFn:c.signup,onSuccess:()=>{t.invalidateQueries({queryKey:l.ME})}})},useLogin:()=>{let t=(0,o.jE)();return(0,a.n)({mutationFn:c.login,onSuccess:()=>{t.invalidateQueries({queryKey:l.ME})}})},useLogout:()=>{let t=(0,o.jE)();return(0,a.n)({mutationFn:c.logout,onSuccess:()=>{t.clear()}})}}},13727:(t,e,r)=>{r.d(e,{J:()=>n,S:()=>o});let n="https://dev-api.balance-debate.com",o={AUTH:{SIGNUP:"/signup",LOGIN:"/login",LOGOUT:"/logout",ME:"/me"}}},29046:(t,e,r)=>{r.d(e,{AuthModalProvider:()=>v,X:()=>p});var n=r(72311),o=r(62847),a=r(81678),s=r(46365),i=r(5950),l=r(45060),c=r(58989),d=r(420),u=r(91791),h=r(44402),m=r(73627),f=r(8737),g=r(45451);function w(t){let{open:e,onClose:r,defaultTab:w="login"}=t,[x,v]=(0,o.useState)(w),[p,E]=(0,o.useState)({nickname:"",password:""}),[C,A]=(0,o.useState)({nickname:"",password:"",confirmPassword:""}),{useLogin:b,useSignup:N}=f.As,y=b(),O=N(),{showSnackbar:j}=(0,g.d)(),T=()=>{E({nickname:"",password:""}),A({nickname:"",password:"",confirmPassword:""}),v(w),r()},P=async t=>{if(t.preventDefault(),!p.nickname.trim())return void j("닉네임을 입력해주세요.","error");if(!p.password)return void j("비밀번호를 입력해주세요.","error");try{let t=await y.mutateAsync(p);200!==t.statusCode||t.code?j(t.message||"로그인에 실패했습니다.","error"):(j("로그인 성공!","success"),T())}catch(t){j("로그인 중 오류가 발생했습니다.","error")}},k=async t=>{if(t.preventDefault(),!C.nickname.trim())return void j("닉네임을 입력해주세요.","error");if(!C.password)return void j("비밀번호를 입력해주세요.","error");if(C.password!==C.confirmPassword)return void j("비밀번호가 일치하지 않습니다.","error");try{let t=await O.mutateAsync({nickname:C.nickname,password:C.password});200!==t.statusCode||t.code?j(t.message||"회원가입에 실패했습니다.","error"):(j("회원가입 성공!","success"),T())}catch(t){j("회원가입 중 오류가 발생했습니다.","error")}};return(0,n.jsx)(a.A,{open:e,onClose:T,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,minHeight:400}},children:(0,n.jsxs)(s.A,{sx:{position:"relative",p:3},children:[(0,n.jsx)(i.A,{onClick:T,sx:{position:"absolute",right:8,top:8,zIndex:1},children:(0,n.jsx)(m.A,{})}),(0,n.jsx)(s.A,{sx:{borderBottom:1,borderColor:"divider",mb:3,pr:5},children:(0,n.jsxs)(l.A,{value:x,onChange:(t,e)=>{v(e),E({nickname:"",password:""}),A({nickname:"",password:"",confirmPassword:""})},variant:"fullWidth",children:[(0,n.jsx)(c.A,{label:"로그인",value:"login"}),(0,n.jsx)(c.A,{label:"회원가입",value:"signup"})]})}),"login"===x&&(0,n.jsxs)(s.A,{component:"form",onSubmit:P,sx:{mt:2},children:[(0,n.jsx)(d.A,{variant:"h5",sx:{mb:3,textAlign:"center",fontWeight:600},children:"로그인"}),(0,n.jsx)(u.A,{fullWidth:!0,label:"닉네임",value:p.nickname,onChange:t=>E(e=>({...e,nickname:t.target.value})),margin:"normal",variant:"outlined"}),(0,n.jsx)(u.A,{fullWidth:!0,label:"비밀번호",type:"password",value:p.password,onChange:t=>E(e=>({...e,password:t.target.value})),margin:"normal",variant:"outlined"}),(0,n.jsx)(h.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:y.isPending,children:y.isPending?"로그인 중...":"로그인"})]}),"signup"===x&&(0,n.jsxs)(s.A,{component:"form",onSubmit:k,sx:{mt:2},children:[(0,n.jsx)(d.A,{variant:"h5",sx:{mb:3,textAlign:"center",fontWeight:600},children:"회원가입"}),(0,n.jsx)(u.A,{fullWidth:!0,label:"닉네임",value:C.nickname,onChange:t=>A(e=>({...e,nickname:t.target.value})),margin:"normal",variant:"outlined"}),(0,n.jsx)(u.A,{fullWidth:!0,label:"비밀번호",type:"password",value:C.password,onChange:t=>A(e=>({...e,password:t.target.value})),margin:"normal",variant:"outlined"}),(0,n.jsx)(u.A,{fullWidth:!0,label:"비밀번호 확인",type:"password",value:C.confirmPassword,onChange:t=>A(e=>({...e,confirmPassword:t.target.value})),margin:"normal",variant:"outlined",error:""!==C.confirmPassword&&C.password!==C.confirmPassword,helperText:""!==C.confirmPassword&&C.password!==C.confirmPassword?"비밀번호가 일치하지 않습니다.":""}),(0,n.jsx)(h.A,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,py:1.5},disabled:O.isPending,children:O.isPending?"회원가입 중...":"회원가입"})]})]})})}let x=(0,o.createContext)(null);function v(t){let{children:e}=t,[r,a]=(0,o.useState)(!1),[s,i]=(0,o.useState)("login"),l=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";i(t),a(!0)},c=()=>{a(!1)};return(0,n.jsxs)(x.Provider,{value:{openModal:l,closeModal:c,openLoginModal:()=>l("login"),openSignupModal:()=>l("signup")},children:[e,(0,n.jsx)(w,{open:r,onClose:c,defaultTab:s})]})}function p(){let t=(0,o.useContext)(x);if(!t)throw Error("useAuthModal must be used within an AuthModalProvider");return t}},31594:(t,e,r)=>{r.d(e,{w:()=>o});var n=r(8737);function o(){let{data:t,isLoading:e,error:r}=n.As.useMe();return{isAuthenticated:(null==t?void 0:t.statusCode)===200&&(null==t?void 0:t.data)!==null,user:(null==t?void 0:t.data)||null,isLoading:e,error:r}}},45451:(t,e,r)=>{r.d(e,{SnackbarProvider:()=>l,d:()=>c});var n=r(72311),o=r(76787),a=r(62773),s=r(62847);let i=(0,s.createContext)(null);function l(t){let{children:e}=t,[r,l]=(0,s.useState)(!1),[c,d]=(0,s.useState)(""),[u,h]=(0,s.useState)("info"),m=()=>{l(!1)};return(0,n.jsxs)(i.Provider,{value:{showSnackbar:function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";d(t),h(e),l(!0)}},children:[e,(0,n.jsx)(o.A,{open:r,autoHideDuration:3e3,onClose:m,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,n.jsx)(a.A,{onClose:m,severity:u,variant:"filled",sx:{width:"100%"},children:c})})]})}function c(){let t=(0,s.useContext)(i);if(!t)throw Error("useSnackbar must be used within a SnackbarProvider");return t}},56546:(t,e,r)=>{r.d(e,{Bf:()=>a,Fx:()=>o,H9:()=>i,N2:()=>s,eT:()=>d,i9:()=>h,p4:()=>c,tT:()=>u,xZ:()=>l});var n=r(93732);async function o(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=await (0,n.Vg)("/debates?size=".concat(e,"&page=").concat(t));if(200!==r.statusCode)throw Error("API 요청 실패: ".concat(r.statusCode));return r.data}async function a(t){let e=await (0,n.Vg)("/debates/".concat(t));if(200!==e.statusCode){if(404===e.statusCode)throw Error("토론을 찾을 수 없습니다.");throw Error("API 요청 실패: ".concat(e.statusCode))}if(!e.data)throw Error("토론 데이터가 없습니다.");return e.data}async function s(t){let e=await (0,n.Vg)("/debates/".concat(t,"/has-vote"));if(200!==e.statusCode)throw Error("투표 여부 조회 실패: ".concat(e.statusCode));if(!e.data)throw Error("투표 여부 데이터가 없습니다.");return e.data}async function i(t,e){let r=await (0,n.$P)("/debates/".concat(t,"/votes"),{target:e});if(200!==r.statusCode){if(404===r.statusCode)throw Error("토론을 찾을 수 없습니다.");if(409===r.statusCode)throw Error("이미 투표하셨습니다.");throw Error("투표 실패: ".concat(r.statusCode))}}async function l(t){let e=await (0,n.Vg)("/debates/".concat(t,"/votes"));if(200!==e.statusCode){if(404===e.statusCode)throw Error("토론을 찾을 수 없습니다.");throw Error("투표 결과 조회 실패: ".concat(e.statusCode))}if(!e.data)throw Error("투표 결과 데이터가 없습니다.");return e.data}async function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,o=await (0,n.Vg)("/debates/".concat(t,"/comments?page=").concat(e,"&size=").concat(r));if(200!==o.statusCode){if(403===o.statusCode)throw Error("NOT_VOTED");throw Error("댓글 조회 실패: ".concat(o.statusCode))}if(!o.data)throw Error("댓글 데이터가 없습니다.");return o.data}async function d(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=await (0,n.$P)("/debates/".concat(t,"/comments"),{content:e,parentCommentId:r});if(200!==o.statusCode){if("NOT_VOTED"===o.code)throw Error("NOT_VOTED");if("NOT_FOUND_DEBATE"===o.code)throw Error("NOT_FOUND_DEBATE");if("NOT_FOUND_COMMENT"===o.code)throw Error("NOT_FOUND_COMMENT");if(403===o.statusCode)throw Error("NOT_VOTED");if(404===o.statusCode)throw Error("NOT_FOUND_DEBATE");if(400===o.statusCode)throw Error("NOT_FOUND_COMMENT");throw Error("댓글 작성 실패: ".concat(o.statusCode))}}async function u(t){let e=await (0,n.$P)("/comments/".concat(t,"/likes"));if(200!==e.statusCode){if("NOT_VOTED"===e.code||403===e.statusCode)throw Error("NOT_VOTED");if("NOT_FOUND_COMMENT"===e.code||404===e.statusCode)throw Error("NOT_FOUND_COMMENT");if("ALREADY_LIKED_COMMENT"===e.code||409===e.statusCode)throw Error("ALREADY_LIKED_COMMENT");throw Error("댓글 좋아요 실패: ".concat(e.statusCode))}}async function h(t){let e=await (0,n.Al)("/comments/".concat(t,"/likes"));if(200!==e.statusCode){if("NOT_FOUND_COMMENT"===e.code||404===e.statusCode)throw Error("NOT_FOUND_COMMENT");throw Error("댓글 좋아요 취소 실패: ".concat(e.statusCode))}}},78987:(t,e,r)=>{r.d(e,{Header:()=>x});var n=r(72311),o=r(6252),a=r.n(o),s=r(62847),i=r(81229),l=r(88120),c=r(46365),d=r(420),u=r(44402),h=r(63407),m=r(31594),f=r(29046),g=r(8737),w=r(45451);function x(t){var e;let{title:r}=t,{isAuthenticated:o,user:x,isLoading:v}=(0,m.w)(),{openLoginModal:p}=(0,f.X)(),{useLogout:E}=g.As,C=E(),{showSnackbar:A}=(0,w.d)(),[b,N]=(0,s.useState)(null),y=()=>{N(null)},O=async()=>{try{await C.mutateAsync(),A("로그아웃되었습니다.","success"),y()}catch(t){A("로그아웃 중 오류가 발생했습니다.","error")}};return(0,n.jsx)("header",{className:"sticky top-0 z-50 border-b border-gray-200 bg-white",children:(0,n.jsxs)("div",{className:"mx-auto flex h-16 max-w-7xl items-center justify-between px-4 md:px-8",children:[(0,n.jsx)(a(),{href:"/",className:"text-xl font-bold text-gray-900",children:"밸런스토론"}),(0,n.jsx)("div",{className:"absolute left-1/2 -translate-x-1/2",children:r&&(0,n.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:r})}),(0,n.jsx)("div",{className:"flex items-center",children:v?(0,n.jsx)("div",{className:"w-8 h-8 rounded-full bg-gray-200 animate-pulse"}):o&&x?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:t=>{N(t.currentTarget)},className:"flex items-center gap-2 rounded-full p-2 hover:bg-gray-100 transition-colors",children:[(0,n.jsx)(i.A,{alt:x.nickname,sx:{width:32,height:32,fontSize:18},children:x.profileEmoji||(null==(e=x.nickname)?void 0:e.charAt(0))}),(0,n.jsx)("span",{className:"hidden md:inline font-medium text-gray-900",children:x.nickname})]}),(0,n.jsx)(l.Ay,{open:!!b,anchorEl:b,onClose:y,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:(0,n.jsxs)(c.A,{sx:{p:2,minWidth:200},children:[(0,n.jsx)(d.A,{variant:"subtitle1",sx:{mb:1,fontWeight:600},children:x.nickname}),(0,n.jsx)(u.A,{fullWidth:!0,variant:"outlined",startIcon:(0,n.jsx)(h.A,{}),onClick:O,disabled:C.isPending,sx:{justifyContent:"flex-start"},children:C.isPending?"로그아웃 중...":"로그아웃"})]})})]}):(0,n.jsxs)("button",{onClick:p,className:"flex items-center gap-2 rounded-full p-2 text-gray-500 hover:bg-gray-100 transition-colors",children:[(0,n.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,n.jsx)("span",{className:"hidden md:inline",children:"로그인"})]})})]})})}},93732:(t,e,r)=>{r.d(e,{$P:()=>s,Al:()=>i,Vg:()=>a});var n=r(13727);async function o(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",headers:o={},body:a,credentials:s="include"}=e,i="".concat(n.J).concat(t),l={method:r,headers:{"Content-Type":"application/json",...o},credentials:s};a&&"GET"!==r&&(l.body=JSON.stringify(a));try{console.log("[API Request] ".concat(r," ").concat(i),a||"");let t=await fetch(i,l);console.log(t);let e=await t.json();return console.log("[API Response] ".concat(r," ").concat(i),e),e}catch(t){return console.error("[API Error] ".concat(r," ").concat(i),t),{statusCode:500,message:"Network error occurred",data:null,code:"NETWORK_ERROR"}}}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t,{...e,method:"GET"})}function s(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(t,{...r,method:"POST",body:e})}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t,{...e,method:"DELETE"})}}}]);